<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Behind the Scenes — Devil’s Roulette VIP</title>
  <link rel="stylesheet" href="devilsroulette.css" />
  <link rel="icon" type="image/png" href="images/dice.png" />

  <style>
    /* === GENERAL === */
    body {
      background: radial-gradient(circle at center, #0a0a0f 0%, #000 100%);
      color: #e6edf3;
      font-family: "Arial", sans-serif;
      overflow: hidden;
    }

    header { position: relative; z-index: 40; }

    /* === LOCKED SCREEN === */
    .vip-locked {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      text-align: center;
      background: rgba(0, 0, 0, 0.82);
      position: relative;
      z-index: 30;
      overflow: hidden;
      padding: 2rem;
    }

    .vip-locked h1 {
      font-size: 2.5rem;
      text-shadow: 0 0 10px #ff0044, 0 0 20px #ff2266;
      z-index: 35;
    }

    .vip-locked input {
      padding: 0.7em 1em;
      border-radius: 10px;
      border: none;
      outline: none;
      width: 220px;
      background: #111;
      color: #fff;
      text-align: center;
      margin: 1em 0;
      box-shadow: 0 0 10px rgba(255, 0, 80, 0.3);
      z-index: 35;
    }

    .vip-locked button {
      background: linear-gradient(135deg, #ff0044, #ff2266);
      color: white;
      padding: 0.6em 1.2em;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-weight: bold;
      transition: transform .18s ease, box-shadow .18s ease;
      box-shadow: 0 0 10px rgba(255, 0, 80, 0.4);
      z-index: 35;
    }

    .vip-locked button:hover {
      transform: scale(1.03);
      box-shadow: 0 0 20px rgba(255, 0, 80, 0.7);
    }

    #vipError {
      color: #ff6666;
      margin-top: 10px;
      display: none;
      z-index: 35;
    }

    /* === GATE (two panels) that contain crack SVGs === */
    .cracks {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 32;
      overflow: hidden;
      display: flex;
    }

    .gate {
      position: absolute;
      top: 0;
      height: 100%;
      width: 50%;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(180deg, rgba(2,2,3,0.95) 0%, rgba(20,0,10,0.6) 100%);
      transition: transform 1.2s cubic-bezier(.22,.9,.35,1), opacity 1s ease;
      box-shadow: inset 0 0 120px rgba(0,0,0,0.6);
    }

    .gate-left { left: 0; transform: translateX(0); }
    .gate-right { right: 0; transform: translateX(0); }

    /* when open: slide gates off-screen */
    .cracks.open-cracks .gate-left  { transform: translateX(-130%); opacity: 0; transition-delay: .1s; }
    .cracks.open-cracks .gate-right { transform: translateX(130%);  opacity: 0; transition-delay: .1s; }

    /* crack SVG styling + glow */
    .crack-svg {
      width: 120%;
      height: auto;
      filter: drop-shadow(0 0 14px rgba(255,30,90,0.6));
    }

    .crack-svg path {
      stroke: rgba(255,70,110,0.98);
      stroke-width: 3;
      fill: none;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-dasharray: 8 6;
      animation: dashMove 1.1s linear infinite;
      opacity: .95;
    }

    @keyframes dashMove {
      from { stroke-dashoffset: 0; }
      to   { stroke-dashoffset: -40; }
    }

    /* charging pulse before opening */
    .cracks.charging .gate-left,
    .cracks.charging .gate-right {
      transform: scale(1.02);
      box-shadow: 0 0 40px rgba(255,0,60,0.45);
    }

    .cracks.charging .crack-overlay {
      animation: rapidPulse .4s ease-in-out infinite;
      opacity: 1;
    }

    .crack-overlay {
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at center, rgba(255,0,60,0.08), transparent 35%);
      opacity: 0.2;
      mix-blend-mode: screen;
      pointer-events: none;
      z-index: 33;
      transition: opacity .2s ease;
    }

    @keyframes rapidPulse {
      0% { filter: blur(1px); opacity: .25; transform: scale(1); }
      50% { filter: blur(6px); opacity: .9; transform: scale(1.02); }
      100% { filter: blur(1px); opacity: .25; transform: scale(1); }
    }

    /* === VIP CONTENT === */
    .vip-content {
      display: none;
      opacity: 0;
      transform: translateY(18px);
      transition: all 700ms ease;
      padding: 3em 2em;
      max-width: 1000px;
      margin: 0 auto;
      z-index: 20;
    }

    .vip-content.visible {
      display: block;
      opacity: 1;
      transform: translateY(0);
    }

    .vip-content h2 { text-align: center; margin-bottom: 1em; text-shadow: 0 0 10px #ff0044; }

    .video-gallery {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2em;
      margin-top: 2em;
    }

    .video-card {
      background: rgba(255, 255, 255, 0.03);
      border-radius: 15px;
      padding: 1em;
      box-shadow: 0 0 20px rgba(255, 0, 60, 0.18);
      transition: transform .2s ease, box-shadow .2s ease;
    }

    .video-card:hover { transform: translateY(-5px); box-shadow: 0 0 28px rgba(255,0,60,0.4); }

    iframe { width: 100%; height: 200px; border-radius: 10px; border: none; }

    footer { text-align: center; padding: 2em; opacity: 0.8; z-index: 10; }

    /* VIP music control button (shows when unlocked) */
    .vip-music-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 60;
      background: linear-gradient(135deg,#ff3366,#ff5577);
      color: white;
      border: none;
      padding: .6rem .9rem;
      border-radius: 10px;
      cursor: pointer;
      box-shadow: 0 6px 20px rgba(255,40,100,0.18);
      font-weight: 700;
    }

    .vip-music-btn:hover { transform: translateY(-2px); }

    /* make sure header/nav remains visible on top */
    .dr-header { position: relative; z-index: 45; }

  </style>
</head>

<body>
  <header class="dr-header">
    <div class="dr-container dr-header-flex">
      <h1 class="dr-logo">🎲 Devil’s <span>Roulette</span></h1>
      <nav class="dr-nav">
        <a href="devilsroulette.html">Home</a>
        <a href="about.html">About</a>
        <a href="community.html">Community</a>
        <a href="information.html">Information</a>
        <a href="overview.html">Overview</a>
        <a href="behindtheseens.html" class="active">VIP</a>
      </nav>
    </div>
  </header>

  <!-- LOCKED SCREEN -->
  <section id="vipLocked" class="vip-locked" aria-hidden="false">
    <div class="cracks" id="cracks" aria-hidden="true">
      <div class="gate gate-left" aria-hidden="true">
        <!-- left cracks SVG (mirrored pattern) -->
        <svg class="crack-svg" viewBox="0 0 600 400" preserveAspectRatio="xMidYMid meet">
          <!-- several jagged paths create a "crack" look -->
          <path d="M120 30 L140 70 L130 110 L160 150 L140 190 L180 240 L160 290" />
          <path d="M220 10 L200 60 L220 100 L210 140 L240 180 L220 230 L250 280" />
          <path d="M80 100 L110 130 L90 190 L120 230" />
        </svg>
      </div>

      <div class="gate gate-right" aria-hidden="true">
        <!-- right cracks SVG (slightly different) -->
        <svg class="crack-svg" viewBox="0 0 600 400" preserveAspectRatio="xMidYMid meet">
          <path d="M480 40 L460 90 L480 130 L450 170 L470 210 L430 260 L460 310" />
          <path d="M380 20 L400 70 L380 110 L390 150 L360 190 L380 230 L350 280" />
          <path d="M520 120 L490 150 L510 210 L480 250" />
        </svg>
      </div>

      <div class="crack-overlay" aria-hidden="true"></div>
    </div>

    <h1>🔒 VIP ACCESS REQUIRED</h1>
    <input type="password" id="vipCode" placeholder="Enter VIP code..." aria-label="VIP code" />
    <button id="vipSubmit">Unlock</button>
    <p id="vipError">Incorrect code. Try again.</p>
  </section>

  <!-- VIP CONTENT -->
  <section id="vipContent" class="vip-content" aria-hidden="true">
    <h2>🎩 Behind the Scenes</h2>
    <p style="text-align:center; max-width:800px; margin:0 auto;">
      Welcome to the inner circle. Here you’ll find unreleased footage, unused clips, and more on <strong>Devil’s Roulette</strong>.
    </p>

    <div class="video-gallery">
      <div class="video-card">
        <h4>Coming Soon</h4>
        <iframe src="https://www.youtube.com/embed/XXXXXXXXXXX?enablejsapi=1" allowfullscreen></iframe>
      </div>
      <div class="video-card">
        <h4>Welcome VIP Member!</h4>
        <iframe src="https://www.youtube.com/embed/-eAdIhuILLY?enablejsapi=1" allowfullscreen></iframe>
      </div>
      <div class="video-card">
        <h4>Coming Soon</h4>
        <iframe src="https://www.youtube.com/embed/ZZZZZZZZZZZ?enablejsapi=1" allowfullscreen></iframe>
      </div>
    </div>
  </section>

  <footer>
    <p>© 2025 Devil’s Roulette — VIP Access</p>
  </footer>

  <script>
    (function () {
      const vipSubmit = document.getElementById("vipSubmit");
      const vipCodeInput = document.getElementById("vipCode");
      const vipContent = document.getElementById("vipContent");
      const vipLocked = document.getElementById("vipLocked");
      const vipError = document.getElementById("vipError");
      const cracks = document.getElementById("cracks");
      const SECRET_CODE = "VIP2025"; // change this if you want

      // Pause/disable any site-wide bg audio to avoid duplicates (if present)
      try {
        const globalBg = document.getElementById("bgMusic");
        if (globalBg && !globalBg.paused) {
          globalBg.pause();
          globalBg.currentTime = 0;
        }
      } catch (e) { /* ignore */ }

      // Music setup (local to this page)
      const normalMusic = new Audio("music/theme.mp3");   // calm menu music
      const vipMusic = new Audio("music/Vipsong1.mp3");  // VIP exclusive
      normalMusic.loop = true;
      vipMusic.loop = true;
      normalMusic.volume = 0.35;
      vipMusic.volume = 0;

      // Utility: fadeTo returns a Promise so we can chain cleanly
      let fadeInterval = null;
      function fadeTo(track, targetVol = 0.6, duration = 900) {
        return new Promise((resolve) => {
          if (!track) return resolve();
          if (fadeInterval) { clearInterval(fadeInterval); fadeInterval = null; }
          const stepMs = 50;
          const steps = Math.max(1, Math.round(duration / stepMs));
          const start = Number(track.volume || 0);
          const diff = targetVol - start;
          let currentStep = 0;
          // ensure playing if we are increasing volume
          if (targetVol > start && track.paused) {
            track.play().catch(() => {});
          }
          fadeInterval = setInterval(() => {
            currentStep++;
            const prog = currentStep / steps;
            track.volume = Math.min(1, Math.max(0, start + diff * prog));
            if (currentStep >= steps) {
              clearInterval(fadeInterval);
              fadeInterval = null;
              if (targetVol === 0) {
                try { track.pause(); } catch (e) {}
              }
              resolve();
            }
          }, stepMs);
        });
      }

      async function crossfade(fromTrack, toTrack) {
        // fade out fromTrack and fade in toTrack simultaneously but ensuring no collisions
        // Start fade in
        try {
          if (toTrack.paused) toTrack.play().catch(() => {});
        } catch (e) {}
        const pFadeOut = fadeTo(fromTrack, 0, 900);
        const pFadeIn  = fadeTo(toTrack, 0.6, 1100);
        await Promise.all([pFadeOut, pFadeIn]);
      }

      // Start normal music after first user gesture (to satisfy autoplay policies).
      // If already unlocked in localStorage, reveal automatically.
      function revealVIP(skipAnimation = false) {
        localStorage.setItem("vipUnlocked", "true");
        // stop cracks and open quick
        cracks.classList.remove("charging");
        cracks.classList.add("open-cracks");
        // crossfade music
        crossfade(normalMusic, vipMusic).catch(() => {});
        // show content after short delay so gate animation has time
        const revealDelay = skipAnimation ? 100 : 800;
        setTimeout(() => {
          vipLocked.style.display = "none";
          vipContent.classList.add("visible");
          // add VIP music toggle button
          showVipMusicToggle();
        }, revealDelay + 700);
      }

      // create VIP music control button (toggle play/pause)
      let vipBtn = null;
      function showVipMusicToggle() {
        if (vipBtn) return;
        vipBtn = document.createElement("button");
        vipBtn.className = "vip-music-btn";
        vipBtn.id = "vipMusicToggle";
        vipBtn.textContent = "⏸ Pause VIP Music";
        document.body.appendChild(vipBtn);

        let playing = true;
        vipBtn.addEventListener("click", async () => {
          if (playing) {
            await fadeTo(vipMusic, 0, 600);
            vipBtn.textContent = "▶ Play VIP Music";
            playing = false;
          } else {
            try {
              vipMusic.play().catch(() => {});
            } catch (e) {}
            await fadeTo(vipMusic, 0.6, 800);
            vipBtn.textContent = "⏸ Pause VIP Music";
            playing = true;
          }
        });
      }

      // If they already unlocked earlier, reveal and skip big animation
      if (localStorage.getItem("vipUnlocked") === "true") {
        // start normalMusic quietly, then immediately crossfade to VIP
        normalMusic.play().catch(() => {});
        // reveal without animation
        revealVIP(true);
        // make sure vip music is audible
        vipMusic.play().catch(() => {});
        fadeTo(vipMusic, 0.6, 500).catch(() => {});
      } else {
        // Not unlocked yet: allow normal music to play after first click
        window.addEventListener("click", function _start() {
          normalMusic.play().catch(() => {});
          window.removeEventListener("click", _start);
        });
      }

      // When user clicks unlock:
      vipSubmit.addEventListener("click", async () => {
        const code = vipCodeInput.value.trim();
        if (!code) return;
        if (code === SECRET_CODE) {
          vipError.style.display = "none";
          // charging pulse before opening
          cracks.classList.add("charging");
          // short "charge up" effect (increase glow/pulse)
          setTimeout(() => {
            // open
            revealVIP(false);
          }, 700); // charging time (ms)
        } else {
          vipError.style.display = "block";
          vipCodeInput.value = "";
        }
      });

      // accessibility: allow Enter key to submit
      vipCodeInput.addEventListener("keydown", (e) => {
        if (e.key === "Enter") vipSubmit.click();
      });

    })();
  </script>
</body>
</html>
