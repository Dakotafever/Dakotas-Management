<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Behind the Scenes - Devil's Roulette VIP</title>
<link rel="icon" href="images/dice.png" type="image/png">
<style>
:root{
  --bg: #0a0003;
  --neon: #ffdd33;
  --neon-strong: #ffd54d;
  --neon-glow: #fff59d;
  --muted: rgba(255,221,51,0.08);
  --accent-dark: #201000;
  --spark: #ffd700;
  --shockwave: rgba(255,221,51,0.12);
  --flash: rgba(255,221,51,0.3);
}

*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--bg);font-family:Orbitron,Arial,sans-serif;color:#fff;overflow:hidden;}

/* Header & Navigation (Enhanced for Always-On-Top) */
header {
  position: relative; /* New stacking context to float above fixed overlays */
  z-index: 999 !important; /* Highest: Above gate (22), curtains (20), content (25), effects (30-35) */
}

header nav {
  background: black;
  text-align: center;
  padding: 10px;
  box-shadow: 0 0 20px #ff0044;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 999 !important; /* Ensure clickable above everything */
  pointer-events: auto !important; /* Explicitly allow clicks, even if parent has none */
  position: relative; /* Helps with stacking */
}

.site-logo {
  height: 50px;
  margin-right: 15px;
  pointer-events: auto; /* Ensure logo clickable if linked */
}

nav a {
  color: #ff0080;
  margin: 0 15px;
  text-decoration: none;
  font-weight: bold;
  transition: 0.3s;
  pointer-events: auto; /* Each link clickable */
}

nav a:hover { color: #fff; text-shadow: 0 0 10px #ff0044; }
nav a.active { text-shadow: 0 0 20px #ff0044; }

/* Ensure VIP Gate Doesn't Block Nav (Already Mostly Good, But Reinforce) */
#vipGate {
  position: fixed; inset: 0; z-index: 22; display: flex; align-items: center; justify-content: center;
  pointer-events: none; /* Container doesn't block nav */
}

#vipGate .ui { 
  pointer-events: auto; /* Only VIP form clickable during lock */
  text-align: center; width: 100%; max-width: 900px; padding: 14px;
  /* No changes to existing */
}

/* During Animations: Nav Stays Above (Curtains/Content) */
.curtain { z-index: 20; /* Below nav */ }
#vipContent { z-index: 25; /* Below nav */ }
#soundBar, #vipMusicBtn { z-index: 24; /* Below nav */ }
.shard, .particle { z-index: 30; /* Effects below nav */ }
#flashOverlay, #pulse { z-index: 35; /* Overlays below nav? Waitâ€”no, these are full-screen effects. If they block nav during break, set to 998 (below 999) */ }
#flashOverlay { z-index: 998; } /* Adjust if flash blocks nav during explosion */
#pulse { z-index: 998; }

/* Responsive: Nav Stays Clickable on Mobile */
@media (max-width: 520px) {
  header nav { padding: 5px; font-size: 0.9rem; } /* Smaller but still clickable */
  nav a { margin: 0 10px; }
}

/* --- Background Nebula (subtle animated gradient for epic atmosphere) --- */
body::before {
  content: '';
  position: fixed; inset: 0; z-index: -1;
  background: radial-gradient(ellipse at center, rgba(255,221,51,0.02) 0%, transparent 50%),
              radial-gradient(ellipse at 20% 80%, rgba(255,204,51,0.01) 0%, transparent 70%),
              radial-gradient(ellipse at 80% 20%, rgba(255,221,51,0.015) 0%, transparent 60%);
  animation: nebulaShift 20s ease-in-out infinite alternate;
}
@keyframes nebulaShift {
  0% { opacity: 0.8; transform: scale(1) rotate(0deg); }
  100% { opacity: 1; transform: scale(1.1) rotate(1deg); }
}

/* --- Screen Shake (applied to body during break) --- */
body.shake {
  animation: screenShake 0.5s cubic-bezier(.36,.07,.19,.97) both;
}
@keyframes screenShake {
  0%, 100% { transform: translate(0); }
  10%, 30%, 50%, 70%, 90% { transform: translate(-2px, 2px); }
  20%, 40%, 60%, 80% { transform: translate(2px, -2px); }
}

/* --- Flash Overlay (full-screen white/neon flash during break) --- */
#flashOverlay {
  position: fixed; inset: 0; z-index: 35; pointer-events: none;
  background: var(--flash); opacity: 0; mix-blend-mode: screen;
  transition: opacity 0.1s ease;
}
#flashOverlay.flash { opacity: 1; animation: flashPulse 0.3s ease-out; }
@keyframes flashPulse {
  0% { opacity: 1; }
  100% { opacity: 0; }
}

/* --- Cracks (behind lock, now with more dynamic paths and intensity) --- */
#cracksContainer {
  position:fixed; inset:0; z-index:10; pointer-events:none;
  transition: opacity 1s ease-out;
}
.crack-svg { 
  position:absolute; width:220px; height:440px; fill:none; stroke:var(--neon); stroke-width:3; stroke-linecap:round; stroke-linejoin:round;
  filter: drop-shadow(0 0 12px rgba(255,221,51,0.45)) drop-shadow(0 0 24px rgba(255,221,51,0.2));
  animation: crackPulse 1.6s infinite alternate, crackWiggle 4s ease-in-out infinite;
}
@keyframes crackPulse { 0%{opacity:.45} 50%{opacity:1} 100%{opacity:.6} }
@keyframes crackWiggle { 0%,100%{ transform: scale(1) rotate(0deg); } 50%{ transform: scale(1.02) rotate(0.5deg); } }
.left-crack { left:8%; top:28%; }
.right-crack { right:8%; top:28%; transform: scaleX(-1); }

/* --- Lock Container (center, with build-up glow) --- */
#lockContainer {
  position:fixed;
  left:50%;
  top:48%;
  transform:translate(-50%,-50%);
  width:300px; /* Slightly larger to fit new SVG proportions */
  height:300px;
  z-index:15; /* above cracks, under UI (UI z=22) */
  pointer-events:none;
  transition: filter 0.3s ease, transform 0.2s ease;
}
#lockContainer.buildup { 
  filter: brightness(1.5) drop-shadow(0 0 40px var(--neon-glow)); 
  transform: translate(-50%,-50%) scale(1.05);
}
#lockContainer.break { transform: translate(-50%,-50%) scale(0.8); opacity: 0; transition: all 0.4s ease-out; }

/* SVG fills + enhanced glow */
.neon-glow { 
  filter: drop-shadow(0 0 14px rgba(255,221,51,0.35)) drop-shadow(0 0 28px rgba(255,204,51,0.18)) drop-shadow(0 0 40px rgba(255,221,51,0.1));
}

/* --- Enhanced Shards (more shards, with trails, sparks, and rotation) --- */
.shard {
  position:fixed;
  background: linear-gradient(180deg, rgba(255,221,51,0.95), rgba(255,204,51,0.85));
  box-shadow: 0 6px 26px rgba(255,204,51,0.16), 0 0 12px rgba(255,221,51,0.36), inset 0 0 8px rgba(255,255,255,0.2);
  border-radius:2px;
  z-index:30; /* above everything during break */
  pointer-events:none;
  will-change: transform, opacity;
}
.shard::after {
  content: '';
  position: absolute; top: 0; left: 0; right: 0; bottom: 0;
  background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.3) 50%, transparent 100%);
  transform: translateX(-100%);
  animation: shardTrail 0.6s linear infinite;
}
@keyframes shardTrail {
  to { transform: translateX(100%); }
}
.shard.spark::before {
  content: ''; position: absolute; top: 50%; left: 50%; width: 4px; height: 4px;
  background: var(--spark); border-radius: 50%; transform: translate(-50%, -50%);
  box-shadow: 0 0 10px var(--spark);
  animation: sparkTwinkle 0.3s ease-out forwards;
}
@keyframes sparkTwinkle {
  0% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
  100% { opacity: 0; transform: translate(-50%, -50%) scale(2); }
}

/* --- Enhanced Zaps: thicker, branched lightning with more frequency during buildup --- */
.zap {
  position:fixed;
  width:3px;
  background: linear-gradient(to bottom, #fff 0%, var(--neon-strong) 50%, #fff 100%);
  z-index:17; pointer-events:none;
  transform-origin: top center;
  filter: drop-shadow(0 0 10px rgba(255,221,51,0.5)) drop-shadow(0 0 20px var(--neon-glow));
  animation: zapAnim 220ms forwards;
}
.zap::before {
  content: '';
  position: absolute; top: 20%; left: -2px; width: 2px; height: 40%; background: inherit;
  transform: rotate(15deg); opacity: 0.7;
}
@keyframes zapAnim {
  0% { opacity:1; transform: scaleY(0.3) rotate(0deg); }
  50% { opacity:1; transform: scaleY(1.2) rotate(8deg); }
  100% { opacity:0; transform: scaleY(0.7) rotate(-6deg); }
}

/* --- Enhanced Pulse burst (with multiple rings and intensity) --- */
#pulse {
  position:fixed;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  width:180px;height:180px;border-radius:50%;
  background: radial-gradient(circle, rgba(255,221,51,0.16) 0%, rgba(255,221,51,0.03) 45%, transparent 70%);
  z-index:18; pointer-events:none; mix-blend-mode:screen;
}
#pulse.burst { animation: pulseBurst 900ms ease-out forwards; }
@keyframes pulseBurst {
  from { transform: translate(-50%,-50%) scale(1); opacity:1; }
  50% { transform: translate(-50%,-50%) scale(4.6); opacity:0.95; }
  to { transform: translate(-50%,-50%) scale(14); opacity:0; }
}
#pulse::before, #pulse::after {
  content: '';
  position: absolute; inset: 0;
  border-radius: 50%;
  background: inherit;
  opacity: 0.6;
  animation: inherit;
  animation-delay: 0.2s, 0.4s;
  animation-duration: 1.1s, 1.3s;
}

/* --- Shockwave effect (ripples out on break, full screen) --- */
#shockwave {
  position: fixed; left: 50%; top: 50%; transform: translate(-50%, -50%);
  width: 0; height: 0; border-radius: 50%;
  background: var(--shockwave);
  z-index: 16; pointer-events: none;
  opacity: 0;
}
#shockwave.expand {
  animation: shockwaveExpand 1.2s ease-out forwards;
}
@keyframes shockwaveExpand {
  0% { width: 0; height: 0; opacity: 1; }
  100% { width: 200vw; height: 200vh; opacity: 0; }
}

/* --- VIP UI (front, with glitch on wrong, buildup glow on correct) --- */
#vipGate {
  position:fixed; inset:0; z-index:22; display:flex; align-items:center; justify-content:center; pointer-events:none;
  transition: opacity 0.5s ease;
}
#vipGate .ui { pointer-events:auto; text-align:center; width:100%; max-width:900px; padding:14px; }

h1 { 
  margin:0 0 12px 0; font-size:2.5rem; color:var(--neon); 
  text-shadow: 0 0 20px rgba(255,221,51,0.25), 0 0 40px rgba(255,221,51,0.1);
  transition: all 0.3s ease;
}
h1.buildup { color: var(--neon-glow); text-shadow: 0 0 30px rgba(255,221,51,0.5), 0 0 60px rgba(255,221,51,0.3); animation: titlePulse 0.5s ease-in-out; }
@keyframes titlePulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}
p.sub { margin:0 0 18px 0; color:#d7c18a; font-size:1.1rem; }

.controls { display:flex; gap:8px; justify-content:center; align-items:center; }

/* input/button with enhanced hover */
input[type="password"]{
  background: rgba(255,221,51,0.04);
  border: 2px solid rgba(255,221,51,0.18);
  padding:10px 12px; color:#fff; border-radius:10px; outline:none; width:240px; font-size:1rem;
  box-shadow:0 6px 22px rgba(0,0,0,0.2);
  transition: all 0.3s ease;
}
input[type="password"]:focus { border-color: var(--neon); box-shadow: 0 0 20px rgba(255,221,51,0.2); }
button#vipEnter{
  padding:10px 16px; border-radius:10px; border:none; cursor:pointer; font-weight:700;
  background: linear-gradient(180deg,var(--neon),var(--neon-strong)); color:#0a0003;
  box-shadow: 0 8px 28px rgba(255,204,51,0.14);
  transition: all 0.3s ease;
}
button#vipEnter:hover { transform: scale(1.05); box-shadow: 0 12px 36px rgba(255,204,51,0.25); }
button#vipEnter.buildup { background: linear-gradient(180deg, var(--neon-glow), #ffed6f); transform: scale(1.1); }

/* error with glitch */
#vipError { 
  color:#ff6b6b; margin-top:12px; display:none; 
  animation: glitch 0.3s ease-in-out;
}
@keyframes glitch {
  0%, 100% { transform: translate(0); }
  20% { transform: translate(-2px, 2px); color: #ff0000; }
  40% { transform: translate(2px, -2px); color: #ff6b6b; }
  60% { transform: translate(-1px, 1px); }
  80% { transform: translate(1px, -1px); }
}

/* --- Enhanced Curtains (with inner glow, particles, and faster open) --- */
.curtain { 
  position:fixed; top:0; height:100%; width:50%; z-index:20; 
  transition:transform 600ms cubic-bezier(.4,0,.2,1); /* faster */
  background: radial-gradient(circle at center, rgba(10,0,3,0.98) 0%, rgba(10,0,3,0.92) 40%); 
  box-shadow: inset 0 0 48px rgba(255,221,51,0.05);
  overflow: hidden;
}
.curtain::before {
  content: ''; position: absolute; top: 0; bottom: 0; width: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,221,51,0.02), transparent);
  animation: curtainGlow 3s ease-in-out infinite;
}
@keyframes curtainGlow {
  0%, 100% { opacity: 0.5; }
  50% { opacity: 1; }
}
.curtain-left{ left:0; } .curtain-right{ right:0; }
.curtain.open-left{ transform:translateX(-100%);} .curtain.open-right{ transform:translateX(100%);}

/* --- Particles (small neon dots flying out during break) --- */
.particle {
  position: fixed; width: 3px; height: 3px; background: var(--neon-glow);
  border-radius: 50%; z-index: 32; pointer-events: none;
  box-shadow: 0 0 8px var(--neon-glow);
  opacity: 0;
}
.particle.active {
  opacity: 1;
  animation: particleFly 1.5s ease-out forwards;
}
@keyframes particleFly {
  0% { transform: scale(0) translate(0, 0); opacity: 1; }
  100% { transform: scale(0.5) translate(var(--dx), var(--dy)); opacity: 0; }
}

 /* SOUND BAR - bottom, compact */
  #soundBar {
    position: fixed;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    width: 60%;
    height: 30px;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    opacity: 0.6;
    pointer-events: none;
  }

  .bar {
    width: 3px;
    background: linear-gradient(to top, #ff0044, #ff66b2);
    border-radius: 3px;
    transition: height 0.1s ease, box-shadow 0.1s ease;
  }

  /* MUSIC BUTTON */
  #vipMusicBtn {
    display: none;
    position: fixed;
    bottom: 50px;
    right: 20px;
    background: #ff0044;
    border-radius: 50%;
    padding: 10px;
    font-size: 22px;
    cursor: pointer;
    box-shadow: 0 0 20px #ff0044;
    z-index: 999;
  }

/* Reveal on VIP Content (After Unlock) - Fixed Visibility */
body.vip-unlocked #soundBar,
body.vip-unlocked #vipMusicBtn {
  display: flex !important; /* soundBar is flex; button works as flex too */
  opacity: 0.85;
  visibility: visible !important; /* Fixed: Show after unlock */
  pointer-events: auto; /* Now clickable */
  transition: opacity 0.5s ease, visibility 0.5s ease; /* Smooth fade in */
}

/* Hide on Lock Screen / Key Phase (Initial & During Animation) */
body:not(.vip-unlocked) #soundBar,
body:not(.vip-unlocked) #vipMusicBtn,
body.key-phase #soundBar,
body.key-phase #vipMusicBtn {
  display: none !important;
  opacity: 0;
  visibility: hidden !important; /* Ensure hidden during lock/animation */
  pointer-events: none;
}

  
/* --- VIP Content (epic reveal: staggered fade-in, neon borders, scale-up) --- */
#vipContent { 
  display:none; z-index:25; position:relative; padding :50px; text-align:center; 
  opacity: 0; transform: scale(0.9); transition: all 1s ease-out;
}
#vipContent.revealed { 
  opacity: 1; transform: scale(1); 
  animation: contentEpicReveal 1.2s ease-out forwards;
}
@keyframes contentEpicReveal {
  0% { opacity: 0; transform: scale(0.9) rotate(-1deg); filter: blur(5px); }
  50% { opacity: 0.7; transform: scale(1.02) rotate(0.5deg); filter: blur(2px); }
  100% { opacity: 1; transform: scale(1) rotate(0deg); filter: blur(0); }
}
#vipContent h1 { 
  font-size:2.5rem; text-shadow:0 0 20px rgba(255,221,51,0.6), 0 0 40px rgba(255,221,51,0.3);
  opacity: 0; transform: translateY(-20px); transition: all 0.6s ease-out 0.2s;
}
#vipContent.revealed h1 { opacity: 1; transform: translateY(0); }
#vipContent p { 
  color:#d7c18a; max-width:800px; margin:0 auto 20px; font-size:1.1rem;
  opacity: 0; transform: translateY(10px); transition: all 0.6s ease-out 0.4s;
}
#vipContent.revealed p { opacity: 1; transform: translateY(0); }
#vipContent iframe {
  border:2px solid rgba(255,34,68,0.08); border-radius:10px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.3), 0 0 30px rgba(255,221,51,0.1);
  opacity: 0; transform: translateY(20px); transition: all 0.6s ease-out 0.6s;
  margin: 10px;
}
#vipContent.revealed iframe { opacity: 1; transform: translateY(0); }
#vipContent iframe:hover { box-shadow: 0 15px 50px rgba(0,0,0,0.4), 0 0 40px rgba(255,221,51,0.2); transform: scale(1.02); }

/* responsive */
@media (max-width:520px){
  #lockContainer{ width:220px; height:220px; top:47% }
  input[type="password"]{ width:170px; }
  #soundBar { width:84%; }
  h1 { font-size: 2rem; }
  #vipContent { padding: 20px; }
  #vipContent iframe { width: 100%; max-width: 420px; height: 236px; }
}
/* Neon Key Styles (Fixed Positioning for Keyhole Snap) */
#keySVG {
  display: none; /* Hidden initially */
  position: absolute;
  width: 100px; /* Slightly smaller for better fit; adjust if needed */
  height: 100px;
  top: 50%; /* Align vertically to lock center */
  left: 50%; /* Align horizontally to lock center */
  margin-left: 150px; /* Start offset right (slides left to keyhole) */
  z-index: 10; /* Below effects, above lock */
  transform: translate(-50%, -50%); /* Center #keySVG itself on lock center */
}

.neon-key {
  filter: drop-shadow(0 0 8px rgba(255,221,51,0.3)) drop-shadow(0 0 16px rgba(255,221,51,0.2));
  transition: all 0.3s ease;
  transform-origin: center bottom 20%; /* Rotate from key "tip" for realistic twist (bottom of key) */
  /* No initial transform offsetâ€”relies on #keySVG positioning */
}

/* Insert Animation: Slide Left to Keyhole + Scale Down (Deeper Insert) + Shadow Build */
.neon-key.insert {
  animation: keyInsert 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}

@keyframes keyInsert {
  0% {
    transform: translate(150px, 0) scale(1) rotate(0deg); /* Start right of lock, full size, upright */
    opacity: 0;
    filter: drop-shadow(0 0 5px rgba(255,221,51,0.2));
    z-index: 10;
  }
  50% {
    transform: translate(75px, 0) scale(0.8) rotate(0deg); /* Midway: Halfway left, slight shrink */
    opacity: 1;
    filter: drop-shadow(0 0 12px rgba(255,221,51,0.5)) drop-shadow(0 0 20px rgba(255,221,51,0.3));
    z-index: 12; /* "Poke through" lock */
  }
  100% {
    transform: translate(0, 0) scale(0.6) rotate(0deg); /* End: Snapped to keyhole, deep insert (smaller) */
    opacity: 1;
    filter: drop-shadow(0 0 15px rgba(255,221,51,0.7)) drop-shadow(0 0 25px rgba(255,221,51,0.5)); /* Strong depth shadow */
    z-index: 15; /* Fully "inside" */
  }
}

/* Twist Animation: Rotate in Place (No Scale/Drift) + Subtle Glow */
.neon-key.twist {
  animation: keyTwist 0.3s ease-in-out forwards; /* Slightly longer for smooth turn */
}

@keyframes keyTwist {
  0% {
    transform: translate(0, 0) scale(0.6) rotate(0deg); /* From inserted position */
    opacity: 1;
  }
  100% {
    transform: translate(0, 0) scale(0.6) rotate(180deg); /* Full 180Â° twist, same position/sizeâ€”no drift */
    opacity: 1;
  }
}

/* Post-Twist Fade Out (Key "Merges" into Lock) */
.neon-key.twist.fade-out {
  animation: keyFadeOut 0.4s ease-out forwards; /* Slower fade for emphasis */
}

@keyframes keyFadeOut {
  0% {
    opacity: 1;
    transform: translate(0, 0) scale(0.6) rotate(180deg);
  }
  100% {
    opacity: 0;
    transform: translate(0, 0) scale(0.4) rotate(180deg); /* Final shrink/fade into keyhole */
  }
}
  /* Initial UI visible */
#vipTitle, .sub, #vipGate .controls {  /* Simplified selectors: .sub for subtitle, .controls for input/button */
  opacity: 1 !important;
  transition: opacity 0.4s ease, visibility 0.4s ease;  /* Smooth fade */
}

/* Hide UI text ONLY during key animation (applied via JS class on body) */
body.key-phase #vipTitle,
body.key-phase .sub,  /* Targets <p class="sub"> */
body.key-phase #vipGate .controls {  /* Targets <div class="controls"> */
  opacity: 0 !important;
  visibility: hidden !important;  /* Prevents interaction too */
}


/* Enhanced Keyhole Glow During Insert (Pulse + Expand) */
#lockSVG circle.insert-glow {
  stroke: var(--neon-glow);
  filter: drop-shadow(0 0 15px var(--neon-glow));
  animation: keyholePulse 0.8s ease-out forwards;
  transform-origin: center; /* For scale */
}

@keyframes keyholePulse {
  0% {
    transform: scale(1);
    stroke-width: 2; /* Normal */
    r: 20; /* Assuming your circle has r=20; adjust if different */
  }
  50% {
    transform: scale(1.1); /* Slight expand to "accept" key */
    stroke-width: 3;
    filter: drop-shadow(0 0 20px var(--neon-glow));
  }
  100% {
    transform: scale(1.05); /* Subtle final expand */
    stroke-width: 2.5;
    filter: drop-shadow(0 0 25px var(--neon-glow));
  }
}

/* Lock Shake on Wrong Code (Keep, but Ensure No Interference with Key) */
#lockContainer.shake {
  animation: lockShake 0.42s ease-in-out;
}

@keyframes lockShake {
  0%, 100% { transform: translate(-50%, -50%) rotate(0deg); }
  25% { transform: translate(-50%, -50%) rotate(-1deg); }
  75% { transform: translate(-50%, -50%) rotate(1deg); }
}





</style>
</head>
<body>

<header>
  <nav>
    <img src="images/dice.png" alt="Devil's Roulette Logo" class="site-logo">
    <a href="devilsroulette.html">Home</a>
    <a href="about.html">About</a>
    <a href="community.html">Community</a>
    <a href="information.html">Information</a>
    <a href="overview.html">Overview</a>
    <a href="behindtheseens.html" class="active">VIP</a>
  </nav>
</header>

<!-- Flash Overlay -->
<div id="flashOverlay" aria-hidden="true"></div>

<!-- Shockwave -->
<div id="shockwave" aria-hidden="true"></div>

<!-- Cracks behind the lock -->
<div id="cracksContainer" aria-hidden="true">
  <svg class="crack-svg left-crack" viewBox="0 0 200 400" aria-hidden="true">
    <path d="M60 40 L72 94 L60 134 L94 172 L70 210 L104 260 L84 306 L110 350"></path>
    <path d="M34 108 L60 142 L42 188 L72 228 L50 280"></path>
    <path d="M90 200 L105 240 L85 290"></path>
  </svg>
  <svg class="crack-svg right-crack" viewBox="0 0 200 400" aria-hidden="true">
    <path d="M140 40 L128 96 L144 136 L116 174 L140 212 L104 262 L132 308 L105 355"></path>
    <path d="M162 122 L130 152 L150 206 L122 246 L140 290"></path>
    <path d="M110 210 L95 250 L115 300"></path>
  </svg>
</div>

<!-- Lock: New integrated SVG padlock (adapted for neon style, square proportions) -->
<div id="lockContainer" aria-hidden="true">
  <svg id="lockSVG" viewBox="0 0 1024 1024" class="neon-glow" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Neon padlock">
    <defs>
      <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
        <feGaussianBlur stdDeviation="6" result="g"/>
        <feMerge><feMergeNode in="g"/><feMergeNode in="SourceGraphic"/></feMerge>
      </filter>
      <radialGradient id="bodyGrad" cx="50%" cy="40%" r="50%">
        <stop offset="0%" stop-color="#ffefb3" stop-opacity="0.15"/>
        <stop offset="70%" stop-color="#ffdd33" stop-opacity="0.05"/>
        <stop offset="100%" stop-color="#ffdd33" stop-opacity="0"/>
      </radialGradient>
    </defs>
    <!-- Main path (adapted: stroke neon, fill subtle gradient for body, no fill on shackle) -->
    <path id="lockPath" d="M800 384h-32V261.872C768 115.024 661.744 0 510.816 0 359.28 0 256 117.472 256 261.872V384h-32c-70.592 0-128 57.408-128 128v384c0 70.592 57.408 128 128 128h576c70.592 0 128-57.408 128-128V512c0-70.592-57.408-128-128-128zM320 261.872C320 152.784 394.56 64 510.816 64 625.872 64 704 150.912 704 261.872V384H320V261.872zM864.001 896c0 35.28-28.72 64-64 64h-576c-35.28 0-64-28.72-64-64V512c0-35.28 28.72-64 64-64h576c35.28 0 64 28.72 64 64v384zm-352-320c-35.344 0-64 28.656-64 64 0 23.632 12.96 44.032 32 55.12V800c0 17.664 14.336 32 32 32s32-14.336 32-32V695.12c19.04-11.088 32-31.504 32-55.12 0-35.344-28.656-64-64-64z"
          stroke="var(--neon)" stroke-width="12" fill="url(#bodyGrad)" stroke-linecap="round" stroke-linejoin="round" filter="url(#glow)"/>
    <!-- Keyhole detail (added neon outline for epic feel) -->
    <circle cx="512" cy="512" r="40" fill="var(--accent-dark)" opacity="0.2" stroke="var(--neon)" stroke-width="6" filter="url(#glow)"/>
  </svg>
  <!-- Inside #lockContainer, right after the </svg> for the lock -->
<svg id="keySVG" viewBox="0 0 512 512" class="neon-key" xmlns="http://www.w3.org/2000/svg" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; transform-origin: center;">
  <defs>
    <filter id="keyGlow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur stdDeviation="4" result="g"/>
      <feMerge><feMergeNode in="g"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>
  </defs>
  <!-- Adapted key path: neon stroke, no fill for outline effect -->
  <path d="m 28.75,291.45 c 42.84,43.42 120.28,36.08 182.99,-13.66 L 420.8,488.28 c 10.23,10.3 26.99,10.29 37.22,0 l 9.73,-9.78 c 10.23,-10.29 10.23,-27.13 0,-37.43 l -61.32,-61.74 26.96,-27.12 35.83,36.04 c 1.77,1.77 4.65,1.77 6.42,0 l 35.04,-35.24 c 0.88,-0.89 1.32,-2.05 1.32,-3.22 0,-1.17 -0.44,-2.34 -1.32,-3.23 L 410.78,246.1 c -1.77,-1.77 -4.65,-1.77 -6.42,0 l -35.04,35.24 c -1.76,1.77 -1.76,4.67 0,6.45 l 35.84,36.03 -26.95,27.1 L 257.52,229.4 C 303.1,165 308.38,87.27 266.23,44.55 217.92,-4.41 125.6,11.16 60.02,79.33 -5.56,147.51 -19.56,242.48 28.75,291.45 Z m 134,-99.66 c 6.61,18.27 3.9,36.08 -14.37,54.35 -18.27,18.28 -57.21,21.83 -79.03,0 -21.82,-21.82 -18.27,-60.75 0,-79.03 18.27,-18.27 36.08,-20.97 54.35,-14.37 3.4,1.23 8.06,6.1 11.31,2.78 3.32,-3.25 -1.55,-7.91 -2.78,-11.31 -6.6,-18.27 -3.9,-36.08 14.37,-54.35 18.28,-18.28 57.21,-21.83 79.03,0 21.83,21.82 18.28,60.75 0,79.03 -18.27,18.27 -36.07,20.97 -54.34,14.37 -3.41,-1.23 -8.07,-6.1 -11.32,-2.78 -3.31,3.25 1.55,7.91 2.78,11.31 z"
        stroke="var(--neon)" stroke-width="8" fill="none" stroke-linecap="round" stroke-linejoin="round" filter="url(#keyGlow)"/>
</svg>
</div>

<!-- Pulse overlay -->
<div id="pulse" aria-hidden="true"></div>

<!-- Curtains -->
<div class="curtain curtain-left" id="curtainLeft" aria-hidden="true"></div>
<div class="curtain curtain-right" id="curtainRight" aria-hidden="true"></div>

<!-- VIP UI (front) -->
<div id="vipGate" aria-hidden="false">
  <div class="ui" role="form" aria-label="VIP Lock Form">
    <h1 id="vipTitle">ðŸ”’ VIP ACCESS REQUIRED</h1>
    <p class="sub">Enter the secret code to unlock the gates...</p>
    <div class="controls">
      <input id="vipCode" type="password" placeholder="Enter Code..." autocomplete="off" />
      <button id="vipEnter">Unlock</button>
    </div>
    <div id="vipError">Incorrect code. Try again.</div>
  </div>
</div>


     <!-- Sound bar (single instance) -->
  <div id="soundBar"></div>
  <div id="vipMusicBtn" aria-hidden="true">ðŸ”Š</div>
  <audio id="openingMusic" src="music/opening.mp3"></audio>
  <audio id="vipMusic" src="music/Vipsong1.mp3" loop></audio>
   

<!-- VIP content (hidden until unlock) -->
<div id="vipContent">
  <h1>ðŸŽ¬ Behind the Scenes</h1>
  <p>Welcome to the hidden world of Devilâ€™s Roulette. Unlock reveals secret footage and prototype maps.</p>
  <div style="display:flex; justify-content:center; gap:20px; flex-wrap:wrap;">
    <iframe width="420" height="236" src="https://www.youtube.com/embed/YOUR_VIDEO_ID1" allowfullscreen></iframe>
    <iframe width="420" height="236" src="https://www.youtube.com/embed/YOUR_VIDEO_ID2" allowfullscreen></iframe>
  </div>
</div>

<script>
/* ----- VIP Script Debug Version (Complete & Fixed) ----- */
// Wait for DOM to load (safety net)
document.addEventListener('DOMContentLoaded', function() {
  console.log('=== VIP SCRIPT STARTED ==='); // First log: Confirms script runs

  /* ----- Configuration ----- */
  const SECRET_CODE = "VIP2025";

  /* Elements - With null checks */
  const vipEnter = document.getElementById('vipEnter');
  const vipCode = document.getElementById('vipCode');
  const vipError = document.getElementById('vipError');
  const vipTitle = document.getElementById('vipTitle');
  const pulse = document.getElementById('pulse');
  const curtainLeft = document.getElementById('curtainLeft');
  const curtainRight = document.getElementById('curtainRight');
  const lockContainer = document.getElementById('lockContainer');
  const cracksContainer = document.getElementById('cracksContainer');
  const vipGate = document.getElementById('vipGate');
  const vipContent = document.getElementById('vipContent');
  const vipMusic = document.getElementById('vipMusic');
  const vipMusicBtn = document.getElementById('vipMusicBtn');
  const soundBar = document.getElementById('soundBar');
  const flashOverlay = document.getElementById('flashOverlay');
  const shockwave = document.getElementById('shockwave');
  const keySVG = document.getElementById('keySVG');
  const openingMusic = document.getElementById('openingMusic');
  const keyhole = document.querySelector('#lockSVG circle'); // Existing keyhole

  // Debug: Log all elements (critical ones first)
  console.log('SECRET_CODE:', SECRET_CODE);
  console.log('vipEnter element:', vipEnter); // Must not be null
  console.log('vipCode element:', vipCode); // Must not be null
  console.log('vipTitle element:', vipTitle);
  console.log('keySVG element:', keySVG);
  console.log('openingMusic element:', openingMusic);
  console.log('keyhole element:', keyhole);
  console.log('All elements loaded. If any null, check HTML IDs!');

  let keyAnimationComplete = false;
  let zapTimer = null;
  let zapActive = true;
  let broken = false;
  let audioCtx, analyser, srcNode, dataArray;

  // Stop if critical elements missing
  if (!vipEnter || !vipCode) {
    console.error('CRITICAL: vipEnter or vipCode is null! Fix HTML IDs.');
    return; // Halt script
  }

  // Ensure UI is visible initially (override any CSS)
  if (vipTitle) vipTitle.style.opacity = '1';
  const subText = document.querySelector('p.sub');
  if (subText) subText.style.opacity = '1';
  const controls = document.querySelector('#vipGate .ui.controls');
  if (controls) controls.style.opacity = '1';

  // Auto-focus input for easier testing
  vipCode.focus();
  console.log('UI visible, input focused.');

  /* -- Sound bar setup -- */
      (function createSoundBars(){
    console.log('Creating sound bars...');
    for(let i=0; i<80; i++){
      const bar = document.createElement('div');
      bar.className = 'bar';
      bar.style.height = '4px';
      soundBar.appendChild(bar);
    }
    if (soundBar) soundBar.style.display = 'flex'; // prep for reveal
    console.log('Sound bars created.');
  })();
  
    
  /* -- Audio visualizer setup -- */
  function initAudioVisualizer(){
    try {
      console.log('Initializing audio visualizer...');
      audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      srcNode = audioCtx.createMediaElementSource(vipMusic);
      analyser = audioCtx.createAnalyser();
      srcNode.connect(analyser);
      analyser.connect(audioCtx.destination);
      analyser.fftSize = 256;
      const bufferLength = analyser.frequencyBinCount;
      dataArray = new Uint8Array(bufferLength);
      const bars = document.querySelectorAll('.bar');
      function animateBars(){
        requestAnimationFrame(animateBars);
        if (!analyser) return;
        analyser.getByteFrequencyData(dataArray);
        bars.forEach((bar,i) => {
          const h = (dataArray[Math.floor(i * bufferLength / bars.length)] || 0) / 4;
          bar.style.height = Math.min(h + 4, 40) + 'px';
          bar.style.boxShadow = `0 0 ${Math.max(h/3,2)}px rgba(255,204,51,0.6)`;
        });
      }
      animateBars();
      console.log('Audio visualizer ready.');
    } catch(e){ console.warn('Audio visualizer init failed:', e); }
  }

  /* -- Zaps: sporadic golden zaps around the lock (only while on lock screen) -- */
  function spawnZapOnce() {
    if (!zapActive || !lockContainer) return;
    const rect = lockContainer.getBoundingClientRect();
    const cx = rect.left + rect.width/2;
    const cy = rect.top + rect.height/2;
    const angle = Math.random() * Math.PI * 2;
    const radius = Math.max(rect.width, rect.height) * (0.6 + Math.random()*0.9);
    const x = cx + Math.cos(angle) * radius;
    const y = cy + Math.sin(angle) * radius;
    const zap = document.createElement('div');
    zap.className = 'zap';
    const len = 30 + Math.random()*90;
    zap.style.height = len + 'px';
    zap.style.left = (x - 1.5) + 'px';
    zap.style.top = (y - 1.5) + 'px';
    zap.style.transform = `rotate(${(Math.random()*40 - 20)}deg)`;
    document.body.appendChild(zap);
    setTimeout(()=> zap.remove(), 300 + Math.random()*250);
  }

  /* schedule sporadic zaps */
  function scheduleZapsIdle(){
    zapActive = true;
    (function loop(){
      if(!zapActive) return;
      spawnZapOnce();
      const delay = 600 + Math.random() * 1800;
      zapTimer = setTimeout(loop, delay);
    })();
  }
  scheduleZapsIdle();
  console.log('Zaps scheduled.');

  /* intensify zaps for build-up */
  function intensifyZaps(duration=700, rate=110) {
    zapActive = false;
    if(zapTimer) clearTimeout(zapTimer);
    const start = Date.now();
    const iv = setInterval(()=> {
      spawnZapOnce();
      if(Date.now() - start > duration){
        clearInterval(iv);
      }
    }, rate);
    setTimeout(() => { zapActive = false; }, duration + 100);
    return iv;
  }

  /* --- Create Particles Burst --- */
  function createParticlesBurst(count=50) {
    console.log('Creating particles burst...');
    if (!lockContainer) return;
    const rect = lockContainer.getBoundingClientRect();
    const cx = rect.left + rect.width/2;
    const cy = rect.top + rect.height/2;
    for(let i=0; i<count; i++) {
      const particle = document.createElement('div');
      particle.className = 'particle';
      particle.style.left = cx + 'px';
      particle.style.top = cy + 'px';
      const angle = (i / count) * Math.PI * 2;
      const dist = 100 + Math.random() * 400;
      particle.style.setProperty('--dx', Math.cos(angle) * dist + 'px');
      particle.style.setProperty('--dy', Math.sin(angle) * dist + 'px');
      document.body.appendChild(particle);
      setTimeout(() => particle.classList.add('active'), i * 10);
      setTimeout(() => particle.remove(), 2000);
    }
  }

  /* --- Shard break animation: more shards with sparks --- */
  function createShardsScatter(count=40) { // increased count
    console.log('Creating shards scatter...');
    if (!lockContainer) return;
    const rect = lockContainer.getBoundingClientRect();
    const cx = rect.left + rect.width/2;
    const cy = rect.top + rect.height/2;

    const shards = [];
    for(let i=0;i<count;i++){
      const s = document.createElement('div');
      s.className = 'shard';
      const w = 8 + Math.random()*28;
      const h = 6 + Math.random()*20;
      s.style.width = w + 'px';
      s.style.height = h + 'px';
      const rx = rect.left + 20 + Math.random() * (rect.width - 40);
      const ry = rect.top + 20 + Math.random() * (rect.height - 40);
      s.style.left = rx + 'px';
      s.style.top = ry + 'px';
      s.style.opacity = 1;
      document.body.appendChild(s);
      shards.push(s);

      // random spark on some shards
      if (Math.random() > 0.6) s.classList.add('spark');
    }

    // animate shards outward
    shards.forEach((sh, i) => {
      const dx = (sh.getBoundingClientRect().left + sh.offsetWidth/2) - cx;
      const dy = (sh.getBoundingClientRect().top + sh.offsetHeight/2) - cy;
      const baseAngle = Math.atan2(dy, dx);
      const spread = (Math.random()*1.2 - 0.6);
      const angle = baseAngle + spread;
      const dist = 160 + Math.random()*300;
      const tx = Math.cos(angle) * dist;
      const ty = Math.sin(angle) * dist - (20 + Math.random()*60); // upward bias
      const rot = (Math.random()*720 - 360);
      const delay = i * 15; // tighter stagger
      setTimeout(()=> {
        sh.style.transition = `transform 1000ms cubic-bezier(.1,.9,.2,1), opacity 1000ms linear`;
        sh.style.transform = `translate(${tx}px, ${ty}px) rotate(${rot}deg) scale(${0.8 + Math.random()*0.8})`;
        sh.style.opacity = 0;
      }, delay);
      setTimeout(()=> sh.remove(), 1400 + delay);
    });
  }

  /* --- Epic Lock Break Sequence (adapted for new SVG) --- */
  function breakLockSequence(){
    console.log('breakLockSequence called!');
    if (broken) return;
    broken = true;

    // Phase 1: Buildup (0-500ms) - Glow, intensify zaps, UI pulse
    console.log('Phase 1: Buildup');
    if (lockContainer) lockContainer.classList.add('buildup');
    if (vipTitle) vipTitle.classList.add('buildup');
    if (vipEnter) vipEnter.classList.add('buildup');
    intensifyZaps(500, 50); // fast zaps

    // Phase 2: Break Moment (500-800ms) - Flash, shake, shockwave, pulse
    setTimeout(() => {
      console.log('Phase 2: Break moment');
      if (flashOverlay) flashOverlay.classList.add('flash');
      document.body.classList.add('shake');
      if (shockwave) shockwave.classList.add('expand');
      if (pulse) pulse.classList.add('burst');

      // Change lock path color to white-hot before break (targets the new path)
      const lockPath = document.querySelector('#lockSVG #lockPath');
      if (lockPath) {
        lockPath.setAttribute('stroke', '#fff4a8');
        lockPath.style.filter = 'url(#glow) drop-shadow(0 0 20px #fff4a8)';
      }
      // Also glow the keyhole
      if (keyhole) {
        keyhole.setAttribute('stroke', '#fff4a8');
        keyhole.style.filter = 'url(#glow) drop-shadow(0 0 15px #fff4a8)';
      }
    }, 500);

    // Phase 3: Explosion (800-1400ms) - Shards, particles, hide lock
    setTimeout(() => {
      console.log('Phase 3: Explosion');
      if (lockContainer) lockContainer.classList.add('break');
      const lockSVG = document.getElementById('lockSVG');
      if (lockSVG) lockSVG.style.opacity = '0';
      createShardsScatter(40);
      createParticlesBurst(50);
    }, 800);

    // Phase 4: Fade cracks (1000ms)
    setTimeout(() => {
      console.log('Phase 4: Fade cracks');
      if (cracksContainer) cracksContainer.style.opacity = '0';
    }, 1000);

    // Phase 5: Curtains open (1400-2000ms) - Dramatic reveal
    setTimeout(() => {
      console.log('Phase 5: Curtains opening');
      if (curtainLeft) curtainLeft.classList.add('open-left');
      if (curtainRight) curtainRight.classList.add('open-right');
    }, 1400);

    // Phase 6: Fade UI (1800ms)
    setTimeout(() => {
      console.log('Phase 6: Fade UI');
      if (vipGate) vipGate.style.opacity = '0';
    }, 1800);

    // Phase 7: Reveal Content (2000ms+) - Staggered epic entrance, start music
    setTimeout(() => {
      console.log('Phase 7: Reveal content, fading music');
      if (vipGate) vipGate.style.display = 'none'; // fully hide
      if (vipContent) vipContent.style.display = 'block';
      if (vipContent) vipContent.classList.add('revealed');
    });
      
      // Reveal sound bar and music button (add body class for CSS trigger)
  document.body.classList.add('vip-unlocked'); // New: Triggers CSS reveal
  console.log('VIP unlocked - sound elements revealed'); // Debug log
  
  if (soundBar) {
    soundBar.style.display = 'flex';
    soundBar.style.visibility = 'visible'; // Direct fallback
  }
  if (vipMusicBtn) {
    vipMusicBtn.style.display = 'flex';
    vipMusicBtn.style.visibility = 'visible'; // Direct fallback
  }
    
      // Fade out opening music over 1s
      if (openingMusic) {
        const fadeOutOpening = setInterval(() => {
          if (openingMusic.volume > 0) {
            openingMusic.volume = Math.max(0, openingMusic.volume - 0.05);
          } else {
            openingMusic.pause();
            openingMusic.currentTime = 0; // Reset for next time
            clearInterval(fadeOutOpening);
          }
        }, 50);
      }

      // Fade in VIP theme over 1s (if not already playing)
      if (vipMusic) {
        vipMusic.volume = 0;
        vipMusic.play().catch(e => console.warn('VIP music autoplay blocked:', e));
        const fadeInVip = setInterval(() => {
          if (vipMusic.volume < 1) {
            vipMusic.volume = Math.min(1, vipMusic.volume + 0.05);
          } else {
            clearInterval(fadeInVip);
          }
        }, 50);
      }

      if (audioCtx && audioCtx.state === 'suspended') audioCtx.resume().catch(() => {});
      if (!audioCtx) initAudioVisualizer();

      // Stop all zaps
      zapActive = false;
      if (zapTimer) clearTimeout(zapTimer);
    }, 2000);

    // Clean up classes after sequence
    setTimeout(() => {
      console.log('Cleanup after sequence');
      document.body.classList.remove('shake');
      if (flashOverlay) flashOverlay.classList.remove('flash');
      if (lockContainer) lockContainer.classList.remove('buildup', 'break');
      if (vipTitle) vipTitle.classList.remove('buildup');
      if (vipEnter) vipEnter.classList.remove('buildup');
      if (keySVG) {
        keySVG.style.display = 'none';
        keySVG.classList.remove('insert', 'twist', 'fade-out');  // Add 'fade-out'
      }
      if (keyhole) keyhole.classList.remove('insert-glow');
      document.body.classList.remove('key-phase');
      keyAnimationComplete = false;
    }, 3000);
  }

  /* --- Wrong code feedback (red flash + small shake, adapted for new SVG) --- */
  function wrongCodeFeedback(){
    console.log('Wrong code feedback triggered');
    if (vipError) vipError.style.display = 'block';
    vipCode.value = '';
    document.body.classList.remove('key-phase');
    if (soundBar) soundBar.style.display = 'none';
    if (vipMusicBtn) vipMusicBtn.style.display = 'none';
    if (vipTitle) {
      vipTitle.style.opacity = '1';
      vipTitle.style.visibility = 'visible';
    }
    if (subText) {
      subText.style.opacity = '1';
      subText.style.visibility = 'visible';
    }
    if (controls) {
      controls.style.opacity = '1';
      controls.style.visibility = 'visible';
    }

    const lockPath = document.querySelector('#lockSVG #lockPath');
    if (lockPath) {
      lockPath.setAttribute('stroke','#ff6b6b');
      lockPath.style.filter = 'url(#glow) drop-shadow(0 0 10px #ff6b6b)';
    }
    if (keyhole) {
      keyhole.setAttribute('stroke', '#ff6b6b');
      keyhole.style.filter = 'url(#glow) drop-shadow(0 0 8px #ff6b6b)';
    }
    // small shake on container
    if (lockContainer) {
      lockContainer.animate([
        { transform: 'translate(-50%,-50%) rotate(-1deg)' }, 
        { transform: 'translate(-50%,-50%) rotate(1deg)' }, 
        { transform: 'translate(-50%,-50%) rotate(0deg)' }
      ], { duration: 420 });
    }
    setTimeout(()=> {
      if (lockPath) {
        lockPath.setAttribute('stroke','#ffdd33');
        lockPath.style.filter = 'url(#glow)';
      }
      if (keyhole) {
        keyhole.setAttribute('stroke', '#ffdd33');
        keyhole.style.filter = 'url(#glow)';
      }
    }, 420);
  }

  /* --- Music + visualizer control --- */
  if (vipMusicBtn) {
    vipMusicBtn.addEventListener('click', () => {
      console.log('Music button clicked');
      if (audioCtx && audioCtx.state === 'suspended') audioCtx.resume().catch(() => {});
      if (vipMusic.paused) {
        vipMusic.play().catch(() => {});
        vipMusicBtn.textContent = 'ðŸ”Š';
      } else {
        vipMusic.pause();
        vipMusicBtn.textContent = 'ðŸ”‡';
      }
    });
  }

  /* initialize audio visualizer on first user interaction */
  function initAudioOnFirstInteraction(){
    function handler(){
      if(!audioCtx) initAudioVisualizer();
      document.removeEventListener('click', handler);
      document.removeEventListener('keydown', handler);
    }
    document.addEventListener('click', handler);
    document.addEventListener('keydown', handler);
  }
  initAudioOnFirstInteraction();
  console.log('Audio interaction handler set up.');

  /* --- Event handlers --- */
  console.log('Attaching event listeners...');
  vipEnter.addEventListener('click', () => {
    console.log('vipEnter CLICKED!'); // This log confirms listener works
    const val = vipCode.value.trim().toUpperCase(); // Make case-insensitive for safety
    console.log('Entered code:', val, 'Expected:', SECRET_CODE);
    
if (val === SECRET_CODE) {
   console.log('Code accepted! Starting key animation...');
   if (vipError) vipError.style.display = 'none';
   
  // Hide UI text: Add class + direct fallback for reliability
  document.body.classList.add('key-phase');
  console.log("Body class 'key-phase' added for UI hide");  // Debug log
 
  // Fallback: Directly hide elements if class doesn't work
  if (vipTitle) {
  vipTitle.style.opacity = '0';
  vipTitle.style.visibility = 'hidden';
 }
  const subText = document.querySelector('.sub');  // Exact selector
  if (subText) {
  subText.style.opacity = '0';
  subText.style.visibility = 'hidden';
 }
   const controls = document.querySelector('#vipGate .controls');
     if (controls) {
     controls.style.opacity = '0';
     controls.style.visibility = 'hidden';
  }
   console.log('UI elements directly hidden (fallback)');
 
  
  // Start key animation + opening music
  if (keySVG) {
    keySVG.style.display = 'block';
    keySVG.classList.add('insert');
    console.log('Key insert started (sliding + scaling in)');
  } else {
    console.error('keySVG not found!');
  }
  if (keyhole) {
    keyhole.classList.add('insert-glow');
    console.log('Keyhole pulsing and expanding!');
  } else {
    console.error('Keyhole not found!');
  }
  
  // Play opening music (non-looping)
  if (openingMusic) {
    openingMusic.volume = 0.8;
    openingMusic.play().catch(e => console.warn('Opening music autoplay blocked:', e));
    console.log('Opening music started');
  }
  
  // After insert (600ms), start twist
  setTimeout(() => {
    console.log('Insert complete, starting twist...');
    if (keySVG) {
      keySVG.classList.add('twist');
      // After twist (200ms buffer), fade out key and trigger break
      setTimeout(() => {
        if (keySVG) {
          keySVG.classList.add('fade-out');
          console.log('Key fading out (inserted and engaged)');
        }
        if (keyAnimationComplete) {  // Ensure flag is set
          console.log('Twist + fade complete, triggering break sequence!');
          breakLockSequence();
        }
      }, 200);  // Twist duration + buffer
    }
    keyAnimationComplete = true;  // Set flag here for safety
  }, 600);  // Matches insert animation duration
} else {
      console.log('Wrong code!');
      wrongCodeFeedback();
    }
  });

  /* Enter key for convenience */
  vipCode.addEventListener('keydown', (e) => {
    if (e.key === 'Enter') {
      console.log('Enter pressed, simulating click...');
      vipEnter.click();
    }
  });

  /* ensure zap stops when content visible (safety) */
  function stopZapsNow(){
    console.log('Stopping zaps now');
    zapActive = false;
    if(zapTimer) clearTimeout(zapTimer);
  }

  console.log('=== VIP SCRIPT FULLY LOADED ==='); // Final log: All set up
}); // End of DOMContentLoaded
</script>
</body>
</html>
